<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Shiny Express – Shiny Express: Basics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<meta name="shinylive:serviceworker_dir" content=".">
<script src="site_libs/quarto-contrib/shinylive-0.2.7/shinylive/load-shinylive-sw.js" type="module"></script>
<script src="site_libs/quarto-contrib/shinylive-0.2.7/shinylive/run-python-blocks.js" type="module"></script>
<link href="site_libs/quarto-contrib/shinylive-0.2.7/shinylive/shinylive.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/shinylive-quarto-css/shinylive-quarto.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta http-equiv="refresh" content="0;URL='https://shiny.posit.co/py/docs/express-vs-core.html'">


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Shiny Express</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Basics</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./advanced.html"> 
<span class="menu-text">Advanced topics</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/wch/shiny_express_doc"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#quickstart" id="toc-quickstart" class="nav-link active" data-scroll-target="#quickstart">Quickstart</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#basic-app-with-a-plot" id="toc-basic-app-with-a-plot" class="nav-link" data-scroll-target="#basic-app-with-a-plot">Basic app with a plot</a></li>
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#caveats" id="toc-caveats" class="nav-link" data-scroll-target="#caveats">Caveats</a></li>
  <li><a href="#differences-between-express-and-core" id="toc-differences-between-express-and-core" class="nav-link" data-scroll-target="#differences-between-express-and-core">Differences between Express and Core</a>
  <ul class="collapse">
  <li><a href="#no-separation-between-ui-and-server-code" id="toc-no-separation-between-ui-and-server-code" class="nav-link" data-scroll-target="#no-separation-between-ui-and-server-code">No separation between UI and server code</a></li>
  <li><a href="#container-components-using-with-ui.xx" id="toc-container-components-using-with-ui.xx" class="nav-link" data-scroll-target="#container-components-using-with-ui.xx">Container components using <code>with ui.xx()</code></a></li>
  <li><a href="#page-level-containers-and-options" id="toc-page-level-containers-and-options" class="nav-link" data-scroll-target="#page-level-containers-and-options">Page-level containers and options</a></li>
  </ul></li>
  <li><a href="#deploying-shiny-express-apps" id="toc-deploying-shiny-express-apps" class="nav-link" data-scroll-target="#deploying-shiny-express-apps">Deploying Shiny Express apps</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Shiny Express: Basics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This document was written and updated during the development of Shiny Express, and some parts of it may now be out of date.</p>
<p>Please see the <a href="https://shiny.posit.co/py/docs/express-vs-core.html">official documentation for Shiny Express</a>.</p>
</div>
</div>
<p>Shiny Express is a new way of writing Shiny apps that is intended to be easier to learn and quicker to write. We think that writing Shiny Express is comparable to Streamlit in terms of how easily you can create an app, but Shiny Express does not limit you the way that Streamlit does – there is a much higher ceiling to what you can do with Shiny Express.</p>
<p>Shiny Express is still Shiny, just with a simpler syntax.</p>
<section id="quickstart" class="level2">
<h2 class="anchored" data-anchor-id="quickstart">Quickstart</h2>
<p>The best way to introduce Shiny Express is by example. Here is a simple “Hello World” app:</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
#| layout: vertical

from shiny import render
from shiny.express import input, ui

ui.input_slider("n", "N", min=1, max=50, value=30)

@render.code
def txt():
    return f"Hello! n*2 is {input.n() * 2}."</code></pre>
<p>The first thing to notice is that <code>ui</code> is imported from <code>shiny.express</code>, as opposed to being imported from <code>shiny</code>.</p>
<p>The slider input comes from <code>ui.input_slider()</code>, and the text output is a function that’s decorated with <code>@render.code</code> and returns a string.</p>
<p>If you’ve seen traditional Shiny applications (which we’ll now refer to as “Shiny Core” apps), you’ll notice some important differences. Here’s the same app written in Shiny Core form:</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
#| layout: vertical
from shiny import App, ui, render

app_ui = ui.page_fixed(
    ui.input_slider("n", "N", min=1, max=50, value=30),
    ui.output_code("txt"),
)

def server(input, output, session):
    @render.code
    def txt():
        return f"Hello! n*2 is {input.n() * 2}."

app = App(app_ui, server)</code></pre>
<p>Not only is there significantly less code in the Express version, but there are fewer concepts to (mis)understand or be intimidated by.</p>
<p>Here’s what’s different in the Core app:</p>
<ul>
<li><code>from shiny import ui</code>, instead of <code>from shiny.express import ui</code>.</li>
<li>The UI is created explicitly in a variable named <code>app_ui</code>, using nested calls to UI component functions.</li>
<li>There is an explicitly defined server function. (This function is executed once for each browser session that connects to the app).</li>
<li>The code output is created with <code>output_code("txt")</code>. For Shiny Express mode, we didn’t have to create that output – it’s created automatically when it sees the <code>@render.code</code>.</li>
<li>There is an explicitly created object named <code>app</code>, which is a <code>shiny.App()</code> object.</li>
</ul>
<p>Shiny Express apps do these things implicitly, instead of requiring you to do them explicitly.</p>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>As of this writing, Shiny Express is in Shiny 0.6.1, which is on PyPI. However, there have been changes to Shiny Express in the development version since then, and this document reflects those changes. It can also be used on <a href="https://shinylive.io/py/examples/">shinylive.io</a>. (For embedding Shinylive applications in Quarto documents, it is technically possible, as this document shows, but it is a manual process as of this writing.)</p>
<p>To run these examples, you can use <a href="https://shinylive.io/py/examples/">shinylive.io</a>, or you can install shiny and htmltools locally:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pip install shiny</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="basic-app-with-a-plot" class="level2">
<h2 class="anchored" data-anchor-id="basic-app-with-a-plot">Basic app with a plot</h2>
<p>The example above shows a very bare-bones Shiny application. Here’s one that’s a little more sophisticated, with a container component (a sidebar), and a plot.</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
#| layout: vertical
#| viewerHeight: 300
import matplotlib.pyplot as plt
from shiny import render
from shiny.express import input, ui

with ui.sidebar():
    ui.input_slider("n", "Number of points", min=1, max=20, value=10)

@render.plot
def plot():
    plt.scatter(range(input.n()), range(input.n()))</code></pre>
<p>Contrast the Shiny Express code above with the Shiny Core equivalent below:</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
#| layout: vertical
#| viewerHeight: 300
import matplotlib.pyplot as plt
from shiny import App, ui, render

app_ui = ui.page_sidebar(
    ui.sidebar(
        ui.input_slider("n", "Number of points", min=1, max=20, value=10),
    ),
    ui.output_plot("plot"),
)

def server(input, output, session):
    @render.plot
    def plot():
        plt.scatter(range(input.n()), range(input.n()))

app = App(app_ui, server)</code></pre>
<p>Some things to notice:</p>
<ul>
<li>In the Core app, we first used the page-level component <code>ui.page_sidebar()</code>, and nested inside of that, a <code>ui.sidebar()</code>.</li>
<li>In the Express app, we created a sidebar using <code>with ui.sidebar()</code>. (Under the hood, this component tells Shiny Express that the parent page component is <code>ui.page_sidebar()</code>).</li>
<li>Notice that with the Express app used <code>express.ui.sidebar()</code>, while the Core app used <code>ui.sidebar()</code>. These are not quite the same thing – the function in <code>express.ui</code> is actually a special wrapper for the function in <code>ui</code> which can be used as a context manager – that is it can be used with <code>with</code>.</li>
</ul>
</section>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>With Shiny Express, our hope is to introduce a gentler simplicity/power tradeoff, that is nearly as easy as Streamlit but 1) not nearly as limited, and 2) leads you most of the way to Shiny Core.</p>
</section>
<section id="caveats" class="level2">
<h2 class="anchored" data-anchor-id="caveats">Caveats</h2>
<p>While we believe that Shiny Express will turn out to be an effective tool for those new to Shiny, we also believe that it will not be appropriate for all use cases–hence our continuing belief in the Shiny Core model. A recurring theme you will find in the finer points below is that Shiny Express is easier to write but harder to manipulate and reason about, while Shiny Core demands more up-front learning and some small inconveniences in return for being easier to read and reason about as your apps get larger.</p>
<p>We also want to acknowledge the inherent risk of introducing a second (or depending on how you count, also a third and fourth!) way of writing Shiny apps. One risk is that Shiny Express will lead users into a learning cul-de-sac that is then harder to grow out of (and into Shiny Core) than if they had just learned Shiny in the first place–as we see Streamlit users cling to it long after they have left the domain where Streamlit works well. Another risk is that having two ways of doing things is just going to be confusing (see Panel, or on the mostly-positive side, Matplotlib).</p>
</section>
<section id="differences-between-express-and-core" class="level2">
<h2 class="anchored" data-anchor-id="differences-between-express-and-core">Differences between Express and Core</h2>
<p>The main differences between Shiny Express and Core are the following:</p>
<ul>
<li>There is no separation between UI and server code. The UI and server code is mixed together.</li>
<li>In Shiny Express, UI components can be nested by writing <code>with ui.xx()</code>, where <code>ui.xx()</code> is a component that can contain other UI elements. In Shiny Core, you use nested function calls, like <code>ui.xx(ui.yy())</code>.</li>
<li>Shiny Express apps have <code>from shiny.express import ...</code>, <code>import shiny.express</code>, or <code>from shiny import express</code>. The presence of any of these statements tells Shiny that the app should be run in Express mode.</li>
</ul>
<section id="no-separation-between-ui-and-server-code" class="level3">
<h3 class="anchored" data-anchor-id="no-separation-between-ui-and-server-code">No separation between UI and server code</h3>
<p>In Core, UI and server logic are declared separately, with the UI containing <code>ui.output_xxx</code> objects to indicate <em>where</em> each output goes and the server containing the logic in a <code>@render.xx</code> function indicating <em>what</em> each output is.</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
# Core
from shiny import ui, render, reactive, App
from datetime import datetime

app_ui = ui.page_fixed(
    ui.h1("Title"),
    ui.output_code("greeting"),
)

def server(input, output, session):
    @reactive.Calc
    def time():
        reactive.invalidate_later(1)
        return datetime.now()

    @render.code
    def greeting():
        return f"Hello, world!\nIt's currently {time()}."

app = App(app_ui, server)</code></pre>
<p>In Shiny Express, the top level of the Python file can contain both UI expressions and server declarations, in any order. By default, declaring a render function causes it to appear right in that spot.</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
# Express
from shiny import ui, render, reactive, App
import shiny.express
from datetime import datetime

ui.h1("Title")

@reactive.Calc
def time():
    reactive.invalidate_later(1)
    return datetime.now()

@render.code
def greeting():
    return f"Hello, world!\nIt's currently {time()}."</code></pre>
<p>Notice how <code>greeting</code> in this app does <em>not</em> have a corresponding call to <code>output_code("greeting")</code>. This is because in Shiny Express, the <code>render</code> functions automatically invoke that output function and add it to the page – no need to do it manually.</p>
<section id="express-advantages" class="level4">
<h4 class="anchored" data-anchor-id="express-advantages">Express advantages:</h4>
<ul>
<li>It’s nice for beginners not to have to learn about the difference between UI and server.</li>
<li>Avoids having to write code in two different places for a single output, and having to make the IDs match up.</li>
<li>No need to write nested function declarations (i.e.&nbsp;functions inside the server function), which can be surprising to Python programmers.</li>
</ul>
</section>
<section id="core-advantages" class="level4">
<h4 class="anchored" data-anchor-id="core-advantages">Core advantages:</h4>
<ul>
<li>UI structure is clearer to read, reorder, and restructure. This advantage grows as app UIs grow larger.</li>
<li>Explicit server function declaration gave us a natural place to put code that should only execute at startup (top level) versus for each session (server function body).</li>
</ul>
</section>
</section>
<section id="container-components-using-with-ui.xx" class="level3">
<h3 class="anchored" data-anchor-id="container-components-using-with-ui.xx">Container components using <code>with ui.xx()</code></h3>
<p>Broadly speaking, there are two kinds of UI components in Shiny: <em>container components</em>, which, as the name suggests, contain other components, and <em>non-container components</em>, which don’t. (You can also think of the UI as a tree data structure; container components have children, while non-container components are leaf, or terminal nodes in the tree.)</p>
<p>Here are some examples of container components:</p>
<ul>
<li><code>sidebar()</code></li>
<li><code>card()</code></li>
<li><code>layout_columns()</code></li>
<li><code>div()</code></li>
</ul>
<p>Here are some examples of non-container components:</p>
<ul>
<li><code>input_text()</code></li>
<li><code>output_plot()</code></li>
</ul>
<p>In Shiny Core, all components are available from the <code>ui</code> submodule, for example, <code>ui.sidebar()</code>, and <code>ui.input_text()</code>, and to nest the components, you nest the function calls, like <code>ui.sidebar(ui.input_text())</code>. You might create a simple app UI like this:</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
#| layout: vertical
# Core
from shiny import ui, render, App

app_ui = ui.page_sidebar(
    ui.sidebar(
        ui.input_text("txt_in", "Type something here:"),
        fg="white",
        bg="black",
    ),
    ui.card(
        ui.output_code("result"),
    )
)

def server(input, output, session):
    @render.code
    def result():
        return f"You entered '{input.txt_in()}'."

app = App(app_ui, server)</code></pre>
<p>In Express apps, there are the following differences:</p>
<ul>
<li>Instead of <code>from shiny import ui</code>, you use <code>from shiny.express import ui</code>. (Almost all functions from <code>shiny.ui</code> have corresponding functions in <code>shiny.express.ui</code>.)</li>
<li>There’s no need to call <code>page_sidebar()</code> – if you simply use <code>ui.sidebar()</code>, Shiny will infer that it needs to use <code>page_sidebar()</code>.</li>
<li>Container components, like <code>ui.sidebar()</code> are <em>context managers</em>, and used via <code>with ui.sidebar()</code>. Their child components go within the <code>with</code> block.</li>
<li>You can put the server code (like <code>@reactive.calc</code> and <code>@render.code</code>) inside of the <code>with</code> statement blocks.</li>
</ul>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
#| layout: vertical
# Express
from shiny import render, App
from shiny.express import input, ui

with ui.sidebar(fg="white", bg="black"):
    ui.input_text("txt_in", "Type something here:")

with ui.card():
    @render.code
    def result():
        return f"You entered '{input.txt_in()}'."</code></pre>
<p>In Shiny Express, container components are usually used as context managers, using <code>with</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In unusual situations, you might want to create HTML content that doesn’t use context managers. HTML tag functions, like <code>div()</code> and <code>span()</code> can actually be used as context managers or as regular functions, so the following are equivalent:</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [editor, viewer]
#| layout: vertical
# Express
from shiny.express import ui

with ui.div():
    with ui.pre(style="background-color: #eff;"):
        "Hello!"

ui.div(
    ui.pre(
        "Hello!",
        style="background-color: #eff;",
    ),
)</code></pre>
<p>More complex component functions, such as <code>sidebar()</code> and <code>card()</code>, can only be used as context managers.</p>
</div>
</div>
</section>
<section id="page-level-containers-and-options" class="level3">
<h3 class="anchored" data-anchor-id="page-level-containers-and-options">Page-level containers and options</h3>
<p>In a Core app, the UI always has a top-level <code>page_</code> container, like <code>page_fluid()</code>, <code>page_fillable()</code>, or <code>page_sidebar()</code>.</p>
<p>With Shiny Express, you normally don’t have to think about which <code>page_</code> function to use.</p>
<p>Instead of you deciding which specific <code>page_</code> function to use, Shiny decides, based on:</p>
<ul>
<li>The contents of the page – for example, if there is a <code>sidebar()</code> at the top level, it will automatically use <code>page_sidebar()</code>.</li>
<li>Options that have been set with the <code>page_opts()</code> function.</li>
</ul>
<p>The <a href="https://posit-dev.github.io/py-shiny/api/PageFunctions.html#shiny.express.ui.page_opts"><code>page_opts()</code></a> function can be used to set the title of the page, as well as the filling behavior of the contents.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>page_opts(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Data app"</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    fillable<span class="op">=</span><span class="va">True</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>With <code>page_opts(fillable=False)</code>, the contents of the page will display at their “natural” size. For example, with a plot, the default height is 400 pixels. If there is more content than fits in the window, a scroll bar will show up.</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [viewer]
#| layout: vertical
#| viewerHeight: 300
import matplotlib.pyplot as plt
from shiny import render
from shiny.express import input, ui

ui.page_opts(fillable=False)

with ui.sidebar():
    ui.input_slider("n", "Number of points", min=1, max=20, value=10)

with ui.pre():
    "ui.page_opts(fillable=False)"

@render.plot
def plot():
    plt.scatter(range(input.n()), range(input.n()))</code></pre>
<p>With <code>page_opts(fillable=True)</code>, the contents will try to scale to fit the window, so that no scroll bar will be present. Some components, like plots, are “flexy” and can stretch to fit; other components, like text, are not flexy, and will stay their natural size.</p>
<pre class="shinylive-python" data-engine="python"><code>#| standalone: true
#| components: [viewer]
#| layout: vertical
#| viewerHeight: 300
import matplotlib.pyplot as plt
from shiny import render
from shiny.express import input, ui

ui.page_opts(fillable=True)

with ui.sidebar():
    ui.input_slider("n", "Number of points", min=1, max=20, value=10)

with ui.pre():
    "ui.page_opts(fillable=True)"

@render.plot
def plot():
    plt.scatter(range(input.n()), range(input.n()))</code></pre>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>These settings for <code>page_opts()</code> are passed to the <a href="https://posit-dev.github.io/py-shiny/api/ui.page_auto.html"><code>shiny.ui.page_auto()</code></a> function.</p>
</div>
</div>
</section>
</section>
<section id="deploying-shiny-express-apps" class="level2">
<h2 class="anchored" data-anchor-id="deploying-shiny-express-apps">Deploying Shiny Express apps</h2>
<p>To deploy Shiny Express apps on a Connect server or shinyapps.io, you will need to install rsconnect-python 1.22.0 or later:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>pip install rsconnect-python --upgrade</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You will also need to provide a <code>requirements.txt</code> file which tells the server to install htmltools and shiny from GitHub:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a># requirements.txt</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>htmltools@git+https://github.com/posit-dev/py-htmltools.git@main</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>shiny@git+https://github.com/posit-dev/py-shiny.git@main</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then deploy the app as usual. If you are in the directory containing the app, use the following command, replacing <code>&lt;server name&gt;</code> with the nickname for your server.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>rsconnect deploy shiny . -n &lt;server name&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>